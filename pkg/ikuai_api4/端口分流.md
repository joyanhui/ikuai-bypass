增

线路绑定 开启：线路断开后禁止切换到其他线路
国内
{"action":"add","func_name":"stream_ipport","param":{"enabled":"yes","tagname":"名字","interface":"wan1","src_addr":{"custom":["192.168.1.100-192.168.1.200","192.168.1.10-192.168.1.23"],"object":[]},"dst_addr":{"custom":[],"object":[]},"iface_band":1,"comment":"b备注","time":{"custom":[{"type":"weekly","weekdays":"1234567","start_time":"00:00","end_time":"23:59","comment":""}],"object":[]},"prio":0,"mode":0,"type":0,"area_code":"","src_port":{"custom":[],"object":[]},"dst_port":{"custom":[],"object":[]},"protocol":"tcp+udp","dst_type":""}}

{"action":"add","func_name":"stream_ipport","param":{"enabled":"yes","tagname":"有目地址和原地址","interface":"wan1","src_addr":{"custom":["192.168.1.100-192.168.1.200","192.168.1.10-192.168.1.23"],"object":[]},"dst_addr":{"custom":["192.168.2.1-192.168.2.20"],"object":[]},"iface_band":1,"comment":"b备注","time":{"custom":[{"weekdays":"1234567","comment":"","start_time":"00:00","type":"weekly","end_time":"23:59"}],"object":[]},"prio":0,"mode":0,"type":0,"area_code":"","src_port":{"custom":[],"object":[]},"dst_port":{"custom":[],"object":[]},"protocol":"tcp+udp","dst_type":""}}

{"action":"add","func_name":"stream_ipport","param":{"enabled":"yes","tagname":"目标和源都用分组优先级5","interface":"wan1","src_addr":{"custom":[],"object":[{"type":0,"gid":"IPGP315","gp_name":"IKBTelegram0"}]},"dst_addr":{"custom":[],"object":[{"type":0,"gid":"IPGP307","gp_name":"IKB国内0"},{"type":0,"gid":"IPGP308","gp_name":"IKB国内1"},{"type":0,"gid":"IPGP309","gp_name":"IKB国内2"}]},"iface_band":1,"comment":"b备注","time":{"custom":[{"weekdays":"1234567","start_time":"00:00","type":"weekly","comment":"","end_time":"23:59"}],"object":[]},"prio":5,"mode":0,"type":0,"area_code":"","src_port":{"custom":[],"object":[]},"dst_port":{"custom":[],"object":[]},"protocol":"tcp+udp","dst_type":""}}

{"action":"add","func_name":"stream_ipport","param":{"enabled":"yes","tagname":"原用ip目的用分组优先级63","interface":"wan1","src_addr":{"custom":["192.168.1.100-192.168.1.200","192.168.1.10-192.168.1.23"],"object":[]},"dst_addr":{"custom":[],"object":[{"type":0,"gid":"IPGP307","gp_name":"IKB国内0"},{"type":0,"gid":"IPGP308","gp_name":"IKB国内1"},{"type":0,"gid":"IPGP309","gp_name":"IKB国内2"}]},"iface_band":1,"comment":"b备注","time":{"custom":[{"type":"weekly","end_time":"23:59","weekdays":"1234567","start_time":"00:00","comment":""}],"object":[]},"prio":63,"mode":0,"type":0,"area_code":"","src_port":{"custom":[],"object":[]},"dst_port":{"custom":[],"object":[]},"protocol":"tcp+udp","dst_type":""}}


下一跳

{"action":"add","func_name":"stream_ipport","param":{"enabled":"yes","tagname":"下一跳name","interface":"","src_addr":{"custom":["192.168.1.99","192.168.1.20-192.168.1.30"],"object":[]},"dst_addr":{"custom":[],"object":[]},"iface_band":0,"comment":"备注","time":{"custom":[{"type":"weekly","weekdays":"1234567","start_time":"00:00","end_time":"23:59","comment":""}],"object":[]},"prio":0,"type":1,"nexthop":"192.168.1.1","area_code":"","src_port":{"custom":[],"object":[]},"dst_port":{"custom":[],"object":[]},"protocol":"tcp+udp","dst_type":""}}

带ip分组的并且不启用线路绑定 （ip分组也就是  src-addr-opt-ipgroup 分流源地址关联IP分组(用于匹配爱快中的IP分组 多个可以用逗号分割) 在设置了src-addr-opt-ipgroup后，src-addr参数会被忽略）
{"action":"add","func_name":"stream_ipport","param":{"enabled":"yes","tagname":"带ip分组的并且不启用线路绑定","interface":"wan1","src_addr":{"custom":[],"object":[]},"dst_addr":{"custom":[],"object":[{"type":0,"gid":"IPGP296","gp_name":"IKB国内0"},{"type":0,"gid":"IPGP298","gp_name":"IKB国内2"}]},"iface_band":0,"comment":"beizhu","time":{"custom":[{"type":"weekly","weekdays":"1234567","start_time":"00:00","end_time":"23:59","comment":""}],"object":[]},"prio":0,"mode":0,"type":0,"area_code":"","src_port":{"custom":[],"object":[]},"dst_port":{"custom":[],"object":[]},"protocol":"tcp+udp","dst_type":""}}


改
{"action":"edit","func_name":"stream_ipport","param":{"enabled":"yes","tagname":"国内流量2","interface":"wan1","src_addr":{"custom":[],"object":[]},"dst_addr":{"custom":[],"object":[]},"iface_band":1,"comment":"备注","time":{"custom":[{"start_time":"00:00","type":"weekly","comment":"","weekdays":"1234567","end_time":"23:59"}],"object":[]},"prio":0,"mode":0,"type":0,"area_code":"","src_port":{"custom":[],"object":[]},"dst_port":{"custom":[],"object":[]},"protocol":"tcp+udp","dst_type":"","id":1}}

删

{"action":"del","func_name":"stream_ipport","param":{"id":"1,2"}}

查
{"action":"show","func_name":"stream_ipport","param":{"TYPE":"total,data","limit":"0,500"}}

{
    "code": 0,
    "message": "Success",
    "results": {
        "total": 2,
        "data": [
            {
                "enabled": "yes",
                "iface_band": 1,
                "tagname": "国内流量2",
                "comment": "备注",
                "nexthop": "",
                "interface": "wan1",
                "dst_type": 0,
                "area_code": "",
                "mode": 0,
                "prio": 0,
                "src_addr": {
                    "custom": {},
                    "object": {}
                },
                "time": {
                    "custom": [
                        {
                            "start_time": "00:00",
                            "type": "weekly",
                            "weekdays": "1234567",
                            "comment": "",
                            "end_time": "23:59"
                        }
                    ],
                    "object": {}
                },
                "type": 0,
                "protocol": "tcp+udp",
                "dst_addr": {
                    "custom": {},
                    "object": {}
                },
                "src_port": {
                    "custom": {},
                    "object": {}
                },
                "dst_port": {
                    "custom": {},
                    "object": {}
                },
                "id": 1
            },
            {
                "enabled": "yes",
                "iface_band": 0,
                "tagname": "下一跳跃",
                "comment": "备注下一跳",
                "nexthop": "192.168.1.1",
                "interface": "",
                "dst_type": 0,
                "area_code": "",
                "mode": 0,
                "prio": 0,
                "src_addr": {
                    "custom": {},
                    "object": {}
                },
                "time": {
                    "custom": [
                        {
                            "start_time": "00:00",
                            "type": "weekly",
                            "weekdays": "1234567",
                            "comment": "",
                            "end_time": "23:59"
                        }
                    ],
                    "object": {}
                },
                "type": 1,
                "protocol": "tcp+udp",
                "dst_addr": {
                    "custom": {},
                    "object": {}
                },
                "src_port": {
                    "custom": {},
                    "object": {}
                },
                "dst_port": {
                    "custom": {},
                    "object": {}
                },
                "id": 2
            }
        ]
    }
}
